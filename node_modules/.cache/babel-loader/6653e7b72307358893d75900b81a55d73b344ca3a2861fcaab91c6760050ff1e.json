{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shaha\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\Project\\\\KanfeiDror\\\\src\\\\pages\\\\HomePageRegularUser\\\\HomeRegular.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport ReportForm from \"../../components/Contact_Form_Component/ReportForm\";\nimport Header from \"../../components/Header_Component/Header\";\nimport EditInformationComponent from \"../../components/Edit_Information_Component/EditInformationComponent\";\n// import { useAuth0 } from \"@auth0/auth0-react\";\nimport { db, auth } from \"../../firebase_setup/firebase\";\n// import { onValue, ref, remove } from \"firebase/database\";\nimport { collection, getDocs, deleteDoc, doc, getDoc } from \"firebase/firestore\";\nimport Footer from \"../../components/Footer_Component/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [showReportForm, setShowReportForm] = useState(false);\n  const [info, setInfo] = useState([]);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const handleDelete = async id => {\n    await deleteDoc(doc(db, \"Information\", id));\n    fetchPost();\n  };\n  const toggleReportForm = () => {\n    setShowReportForm(!showReportForm);\n  };\n  const fetchPost = async () => {\n    await getDocs(collection(db, \"Information\")).then(querySnapshot => {\n      const newData = querySnapshot.docs.map(doc => ({\n        ...doc.data(),\n        id: doc.id\n      }));\n      setInfo(newData);\n    });\n  };\n  useEffect(() => {\n    fetchPost();\n\n    //Check if the logged-in user's email is in the \"AdminUsers\" collection\n    const checkAdminStatus = async () => {\n      const adminRef = doc(collection(db, \"AdminUsers\"), auth.currentUser.email);\n      const adminDocSnapshot = await getDoc(adminRef);\n      setIsAdmin(adminDocSnapshot.exists());\n    };\n    if (auth.currentUser) {\n      checkAdminStatus();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [info.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.informationText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), auth.currentUser && isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(item.id),\n          children: \"delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }, this), \" \"]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)), auth.currentUser ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleReportForm,\n            children: showReportForm ? \"הסתר עריכת מידע\" : \"עריכת המידע\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), showReportForm && /*#__PURE__*/_jsxDEV(EditInformationComponent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleReportForm,\n          children: showReportForm ? \"הסתר הגשת דיווח\" : \"הגש דיווח\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), showReportForm && /*#__PURE__*/_jsxDEV(ReportForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"SNwB51oNVexrAdm9uoOTWecF5i4=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","ReportForm","Header","EditInformationComponent","db","auth","collection","getDocs","deleteDoc","doc","getDoc","Footer","jsxDEV","_jsxDEV","Home","_s","showReportForm","setShowReportForm","info","setInfo","isAdmin","setIsAdmin","handleDelete","id","fetchPost","toggleReportForm","then","querySnapshot","newData","docs","map","data","checkAdminStatus","adminRef","currentUser","email","adminDocSnapshot","exists","children","item","title","fileName","_jsxFileName","lineNumber","columnNumber","informationText","onClick","_c","$RefreshReg$"],"sources":["C:/Users/shaha/OneDrive/שולחן העבודה/Project/KanfeiDror/src/pages/HomePageRegularUser/HomeRegular.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ReportForm from \"../../components/Contact_Form_Component/ReportForm\";\nimport Header from \"../../components/Header_Component/Header\";\nimport EditInformationComponent from \"../../components/Edit_Information_Component/EditInformationComponent\";\n// import { useAuth0 } from \"@auth0/auth0-react\";\nimport { db, auth } from \"../../firebase_setup/firebase\";\n// import { onValue, ref, remove } from \"firebase/database\";\nimport { collection, getDocs, deleteDoc, doc, getDoc } from \"firebase/firestore\";\nimport Footer from \"../../components/Footer_Component/Footer\";\n\nexport default function Home() {\n  const [showReportForm, setShowReportForm] = useState(false);\n  const [info, setInfo] = useState([]);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const handleDelete = async (id) => {\n    await deleteDoc(doc(db, \"Information\", id));\n    fetchPost();\n  };\n\n  const toggleReportForm = () => {\n    setShowReportForm(!showReportForm);\n  };\n\n  const fetchPost = async () => {\n    await getDocs(collection(db, \"Information\")).then((querySnapshot) => {\n      const newData = querySnapshot.docs.map((doc) => ({\n        ...doc.data(),\n        id: doc.id,\n      }));\n      setInfo(newData);\n    });\n  };\n\n\n  useEffect(() => {\n    fetchPost();\n\n    //Check if the logged-in user's email is in the \"AdminUsers\" collection\n    const checkAdminStatus = async () => {\n      const adminRef = doc(collection(db, \"AdminUsers\"), auth.currentUser.email);\n      const adminDocSnapshot = await getDoc(adminRef);\n      setIsAdmin(adminDocSnapshot.exists());\n    };\n\n    if (auth.currentUser) {\n      checkAdminStatus();\n    }\n  }, []);\n\n  return (\n    <div>\n      <div>\n        \n        {info.map((item) => (\n          <div key={item.id}>\n            <h3>{item.title}</h3>\n            <p>{item.informationText}</p>\n            {/* Render the \"delete\" button only if there is a logged-in user */}\n            {auth.currentUser && isAdmin &&(\n              <button onClick={() => handleDelete(item.id)}>delete</button>\n            )}{\" \"}\n          </div>\n        ))}\n        {/* {isAuthenticated ? ( */}\n\n        {auth.currentUser ? (\n          <div>\n          {isAdmin ? (\n            <div>\n              <button onClick={toggleReportForm}>\n                {showReportForm ? \"הסתר עריכת מידע\" : \"עריכת המידע\"}\n              </button>\n              {showReportForm && <EditInformationComponent />}\n            </div>\n          ) : null}\n        </div>\n        ) : (\n          <div>\n            <button onClick={toggleReportForm}>\n              {showReportForm ? \"הסתר הגשת דיווח\" : \"הגש דיווח\"}\n            </button>\n            {showReportForm && <ReportForm />}\n          </div>\n        )}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}