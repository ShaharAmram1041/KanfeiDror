[{"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\index.js":"1","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\App.js":"2","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\firebase_setup\\firebase.js":"3","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\LoginPage\\Login.js":"4","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\HomePageRegularUser\\HomeRegular.js":"5","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\ReportsTablePage\\ReportsTable.js":"6","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\FollowSingleReportPage\\FollowSingleReportPage.js":"7","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\DataGraphs\\DataGraphs.js":"8","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Header_Component\\Layout.js":"9","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Header_Component\\Header.js":"10","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Contact_Form_Component\\ReportForm.js":"11","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Footer_Component\\Footer.js":"12","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Edit_Information_Component\\EditInformationComponent.js":"13","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Reports_Table_Component\\ReportsTableCom.js":"14","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Logout_Button_Component\\Logout_button.js":"15","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Login_Button_Component\\LoginButton.js":"16","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Email_Cpomponent\\EmailForm.js":"17","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\ProtectedRoute.js":"18","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\context\\AuthContext.js":"19","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Signup_Component\\Signup.jsx":"20","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\RemoveUser_Component\\RemoveAdministraitor.jsx":"21","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\ProtectedAdminRoute.js":"22","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\RemoveAdministratorPage\\RemoveAdministrator.js":"23","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\AddAdministratorPage\\AddAdministrator.js":"24"},{"size":303,"mtime":1685791480000,"results":"25","hashOfConfig":"26"},{"size":2074,"mtime":1685810118000,"results":"27","hashOfConfig":"26"},{"size":711,"mtime":1685791482000,"results":"28","hashOfConfig":"26"},{"size":1390,"mtime":1685791482000,"results":"29","hashOfConfig":"26"},{"size":2817,"mtime":1685799138000,"results":"30","hashOfConfig":"26"},{"size":307,"mtime":1685791482000,"results":"31","hashOfConfig":"26"},{"size":2575,"mtime":1685791482000,"results":"32","hashOfConfig":"26"},{"size":11412,"mtime":1685791482000,"results":"33","hashOfConfig":"26"},{"size":272,"mtime":1685791480000,"results":"34","hashOfConfig":"26"},{"size":4726,"mtime":1685817416000,"results":"35","hashOfConfig":"26"},{"size":19223,"mtime":1685873356487,"results":"36","hashOfConfig":"26"},{"size":275,"mtime":1685791482000,"results":"37","hashOfConfig":"26"},{"size":1823,"mtime":1685791482000,"results":"38","hashOfConfig":"26"},{"size":13718,"mtime":1685817272000,"results":"39","hashOfConfig":"26"},{"size":666,"mtime":1685791482000,"results":"40","hashOfConfig":"26"},{"size":601,"mtime":1685791480000,"results":"41","hashOfConfig":"26"},{"size":11225,"mtime":1685817289000,"results":"42","hashOfConfig":"26"},{"size":304,"mtime":1685803084000,"results":"43","hashOfConfig":"26"},{"size":1321,"mtime":1685817232000,"results":"44","hashOfConfig":"26"},{"size":1346,"mtime":1685817276000,"results":"45","hashOfConfig":"26"},{"size":2595,"mtime":1685798337000,"results":"46","hashOfConfig":"26"},{"size":1419,"mtime":1685817356000,"results":"47","hashOfConfig":"26"},{"size":3444,"mtime":1685869474820,"results":"48","hashOfConfig":"26"},{"size":3507,"mtime":1685810134000,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1jsw27b",{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56"},{"filePath":"57","messages":"58","suppressedMessages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63"},{"filePath":"64","messages":"65","suppressedMessages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67"},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71"},{"filePath":"72","messages":"73","suppressedMessages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75"},{"filePath":"76","messages":"77","suppressedMessages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","suppressedMessages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","suppressedMessages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"85"},{"filePath":"86","messages":"87","suppressedMessages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89"},{"filePath":"90","messages":"91","suppressedMessages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93"},{"filePath":"94","messages":"95","suppressedMessages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","suppressedMessages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","suppressedMessages":"102","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"103","messages":"104","suppressedMessages":"105","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"106","messages":"107","suppressedMessages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109"},{"filePath":"110","messages":"111","suppressedMessages":"112","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"113","messages":"114","suppressedMessages":"115","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116"},{"filePath":"117","messages":"118","suppressedMessages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"120"},{"filePath":"121","messages":"122","suppressedMessages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"124","messages":"125","suppressedMessages":"126","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"127"},{"filePath":"128","messages":"129","suppressedMessages":"130","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"131","messages":"132","suppressedMessages":"133","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\index.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\App.js",["134"],[],"import { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport HomeRgular from \"./pages/HomePageRegularUser/HomeRegular\";\nimport FollowSingleReportPage from \"./pages/FollowSingleReportPage/FollowSingleReportPage\";\nimport Login from \"./pages/LoginPage/Login\";\nimport ReportsTable from \"./pages/ReportsTablePage/ReportsTable\";\nimport DataGraphs from \"./components/DataGraphs/DataGraphs\";\nimport Signup from \"./components/Signup_Component/Signup\";\nimport Layout from \"./components/Header_Component/Layout\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\nimport ProtectedAdminRoute from './components/ProtectedAdminRoute'\nimport AddAdministrator from \"./pages/AddAdministratorPage/AddAdministrator\";\nimport RemoveAdministrator from \"./pages/RemoveAdministratorPage/RemoveAdministrator\";\n\n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n        <Layout>\n          <AuthContextProvider>\n\n          \n        <Routes>\n          {/* public routs */}\n          <Route path=\"/\" element={<HomeRgular />} />\n          <Route\n            path=\"/FollowSingleReportPage\"\n            element={<FollowSingleReportPage />}\n          />\n          <Route path=\"/Login\" element={<Login />} />\n\n          {/* we want to protect this routs */}\n          <Route path=\"/ReportsTable\" element={  <ProtectedRoute> <ReportsTable />    </ProtectedRoute>   } />\n          <Route path=\"/DataGraphs\" element={<ProtectedRoute> <DataGraphs /> </ProtectedRoute> } />\n          <Route path=\"/Signup\" element={       <ProtectedRoute> <Signup/>    </ProtectedRoute>} />\n\n\n          <Route path=\"/AddAdministrator\" element={<ProtectedAdminRoute><AddAdministrator /></ProtectedAdminRoute>} />\n          <Route path=\"/RemoveAdministrator\" element={<ProtectedAdminRoute><RemoveAdministrator /></ProtectedAdminRoute>} />\n\n\n          {/* catch all */}\n          <Route path=\"*\" element={<h1>PAGE NOT FOUND</h1>} />\n        </Routes>\n        </AuthContextProvider>\n        </Layout>\n    </div>\n  );\n}\n\nexport default App;","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\firebase_setup\\firebase.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\LoginPage\\Login.js",["135"],[],"import React, { useState } from \"react\";\nimport Header from \"../../components/Header_Component/Header\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  sendPasswordResetEmail,\n  signInWithEmailAndPassword,\n} from \"firebase/auth\";\nimport { auth } from \"../../firebase_setup/firebase\";\n\nexport default function Login() {\n  const [email, setEmail] = useState(\"\");\n  const navigate = useNavigate();\n\n  const [loginPassword, setLoginPassword] = useState(\"\");\n\n  const login = async () => {\n    try {\n      await signInWithEmailAndPassword(auth, email, loginPassword);\n      navigate(\"/\");\n    } catch (e) {\n      console.log(e.code);\n    }\n  };\n\n  const forgetPassword = async () => {\n    try {\n      if (email === \"\") alert(\"Don't forgent email address\");\n      await sendPasswordResetEmail(auth, email);\n    } catch (e) {\n      console.log(e.code);\n    }\n  };\n\n  return (\n    <div>\n      <h3>התחברות למערכת</h3>\n      <input\n        type=\"email\"\n        placeholder=\"email\"\n        onChange={(e) => {\n          setEmail(e.target.value);\n        }}\n      ></input>\n      <input\n        type=\"password\"\n        placeholder=\"password\"\n        onChange={(e) => {\n          setLoginPassword(e.target.value);\n        }}\n      ></input>\n\n      <button onClick={login}>התחבר</button>\n      <button onClick={forgetPassword}>שכחתי סיסמא</button>\n    </div>\n  );\n}\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\HomePageRegularUser\\HomeRegular.js",["136"],[],"import React, { useEffect, useState } from \"react\";\nimport ReportForm from \"../../components/Contact_Form_Component/ReportForm\";\nimport Header from \"../../components/Header_Component/Header\";\nimport EditInformationComponent from \"../../components/Edit_Information_Component/EditInformationComponent\";\n// import { useAuth0 } from \"@auth0/auth0-react\";\nimport { db, auth } from \"../../firebase_setup/firebase\";\n// import { onValue, ref, remove } from \"firebase/database\";\nimport { collection, getDocs, deleteDoc, doc, getDoc } from \"firebase/firestore\";\nimport Footer from \"../../components/Footer_Component/Footer\";\n\nexport default function Home() {\n  const [showReportForm, setShowReportForm] = useState(false);\n  const [info, setInfo] = useState([]);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const handleDelete = async (id) => {\n    await deleteDoc(doc(db, \"Information\", id));\n    fetchPost();\n  };\n\n  const toggleReportForm = () => {\n    setShowReportForm(!showReportForm);\n  };\n\n  const fetchPost = async () => {\n    await getDocs(collection(db, \"Information\")).then((querySnapshot) => {\n      const newData = querySnapshot.docs.map((doc) => ({\n        ...doc.data(),\n        id: doc.id,\n      }));\n      setInfo(newData);\n    });\n  };\n\n\n  useEffect(() => {\n    fetchPost();\n\n    //Check if the logged-in user's email is in the \"AdminUsers\" collection\n    const checkAdminStatus = async () => {\n      const adminRef = doc(collection(db, \"AdminUsers\"), auth.currentUser.email);\n      const adminDocSnapshot = await getDoc(adminRef);\n      setIsAdmin(adminDocSnapshot.exists());\n    };\n\n    if (auth.currentUser) {\n      checkAdminStatus();\n    }\n  }, []);\n\n  return (\n    <div>\n      <div>\n        \n        {info.map((item) => (\n          <div key={item.id}>\n            <h3>{item.title}</h3>\n            <p>{item.informationText}</p>\n            {/* Render the \"delete\" button only if there is a logged-in user */}\n            {auth.currentUser && isAdmin &&(\n              <button onClick={() => handleDelete(item.id)}>delete</button>\n            )}{\" \"}\n          </div>\n        ))}\n        {/* {isAuthenticated ? ( */}\n\n        {auth.currentUser ? (\n          <div>\n          {isAdmin ? (\n            <div>\n              <button onClick={toggleReportForm}>\n                {showReportForm ? \"הסתר עריכת מידע\" : \"עריכת המידע\"}\n              </button>\n              {showReportForm && <EditInformationComponent />}\n            </div>\n          ) : null}\n        </div>\n        ) : (\n          <div>\n            <button onClick={toggleReportForm}>\n              {showReportForm ? \"הסתר הגשת דיווח\" : \"הגש דיווח\"}\n            </button>\n            {showReportForm && <ReportForm />}\n          </div>\n        )}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\ReportsTablePage\\ReportsTable.js",["137"],[],"import React from \"react\";\nimport Header from \"../../components/Header_Component/Header\";\nimport ReportsTableCom from \"../../components/Reports_Table_Component/ReportsTableCom\";\n\n//read from firebase\n\nexport default function ReportsTable() {\n  return (\n    <div>\n      <ReportsTableCom />\n    </div>\n  );\n}\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\FollowSingleReportPage\\FollowSingleReportPage.js",["138","139"],[],"import React, { useState, useEffect } from \"react\";\nimport { db } from \"../../firebase_setup/firebase\";\nimport { getDocs, doc,query,collection,where } from \"firebase/firestore\";\nimport classes from \"./FollowSingleReportPage.module.scss\";\n\nexport default function FollowSingleReportPage() {\n  const [searchPerId, setSearchPerId] = useState(\"\");\n  const [report, setReport] = useState(null);\n\n    const fetchReport = async() => {\n      if (searchPerId) {\n        const reportCollectionRef = collection(db, \"Reports\");\n        const querySnapshot = await getDocs(query(reportCollectionRef, where(\"uuid\", \"==\", searchPerId)));\n        if (!querySnapshot.empty) {\n          querySnapshot.forEach((doc) => {\n            const reportData = doc.data();\n            setReport({\n                  uuid: reportData.uuid, // Use the \"uuid\" field from Firestore\n                  name: reportData.name,\n                  email: reportData.email,\n                  city: reportData.city,\n                  place: reportData.place,\n                  date: reportData.date,\n                  message: reportData.message,\n                  urgency: reportData.urgency,\n                  status: reportData.status,\n                });\n          });\n        }\n      } else {\n        setReport(null);\n      }\n    };\n\n\n  const handleSubmit = async () => {\n    await fetchReport();\n  }\n\n  return (\n    <div className={classes.main_container}>\n      <form\n        className={classes.form_container}\n        name=\"search\"\n        onSubmit={(e) => {\n          e.preventDefault();\n        }}\n      >\n        <input\n          type=\"text\"\n          name=\"txt\"\n          readOnly={false}\n          className={classes.input}\n          onChange={(event) => {\n            setSearchPerId(event.target.value);\n          }}\n        />\n        <button type=\"submit\" className={classes.submit_button} onClick={(e) => {handleSubmit();  }}>\n          🔍\n        </button>\n        {report ? (\n          <div>\n            <h1 style={{ direction: \"rtl\" }} className={classes.report_id}>\n              קוד סודי : {report.uuid}\n            </h1>\n            <h2 style={{ direction: \"rtl\" }} className={classes.report_status}>\n              סטטוס : {report.status}\n              </h2>\n            {/* Render other properties of the report as needed */}\n          </div>\n        ) : (\n          <p className={classes.error_message}>\n            על מנת לברר את סטטוס הפנייה יש להקיש את הקוד הסודי שקיבלת\n          </p>\n        )}\n      </form>\n    </div>\n  );\n}\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\DataGraphs\\DataGraphs.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Header_Component\\Layout.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Header_Component\\Header.js",["140","141","142","143"],[],"import React, { useEffect, useState } from \"react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport LoginButton from \"../Login_Button_Component/LoginButton\";\nimport LogoutButton from \"../Logout_Button_Component/Logout_button\";\nimport { auth, db } from \"../../firebase_setup/firebase\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport classes from \"./Header.module.scss\";\nimport { collection, doc, getDoc } from \"firebase/firestore\";\nimport { BiMenuAltRight } from \"react-icons/bi\";\nimport { AiOutlineClose } from \"react-icons/ai\";\n\nexport default function Header() {\n  const [menuOpen, setMenuOpen] = useState(true);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isRegularUser, setIsRegularUser] = useState(false);\n  const navigate =useNavigate();\n\n  const checkUserRoles = async () => {\n    try {\n      const user = auth.currentUser;\n      if (user) {\n        const adminRef = doc(collection(db, \"AdminUsers\"), user.email);\n        const adminDoc = await getDoc(adminRef);\n        if (adminDoc.exists()) {\n          console.log(\"You are admin!\");\n          setIsAdmin(true);\n        } else {\n          console.log(\"You are not adminUser.\");\n          setIsAdmin(false);\n        }\n\n        const regularRef = doc(collection(db, \"RegularUsers\"), user.email);\n        const regularDoc = await getDoc(regularRef);\n        if (regularDoc.exists()) {\n          console.log(\"You are a RegularUser!\");\n          setIsRegularUser(true);\n        } else {\n          console.log(\"You are not a regular user.\");\n          setIsRegularUser(false);\n        }\n      } else {\n        setIsAdmin(false);\n        setIsRegularUser(false);\n        console.log(\"User not logged in. isAdmin:\", isAdmin);\n      }\n    } catch (error) {\n      console.error(\"Error checking user roles:\", error);\n    }\n  };\n\n  useEffect(() => {\n    checkUserRoles();\n  }, []);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      if (user) {\n        checkUserRoles();\n      }\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const [size, setSize] = useState({\n    width: undefined,\n    height: undefined,\n  });\n\n  const menuToggleHandler = () => {\n    setMenuOpen((p) => !p);\n  };\n\n  const handleLogout= ()=>{\n    setMenuOpen((p) => !p);\n    navigate('/')\n  }\n\n  useEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  useEffect(() => {\n    if (size.width > 768 && menuOpen) {\n      setMenuOpen(false);\n    }\n  }, [size.width, menuOpen]);\n\n  useEffect(() => {\n    onAuthStateChanged(auth, (user) => {\n      if (user) {\n        const uid = user.uid;\n      } else {\n        console.log(\"user is logged out\");\n      }\n    });\n  }, []);\n\n  \n\n  return (\n    <header className={classes.header}>\n      <div className={classes.header__content}>\n        <NavLink to=\"/\" className={classes.header__content__logo}>\n          כנפי\n          <br />\n          דרור\n        </NavLink>\n        <nav\n          className={`${classes.header__content__nav} ${\n            menuOpen && size.width < 768 ? classes.isMenu : \"\"\n          }`}\n        >\n          <ul>\n            <li>\n              <NavLink to=\"/FollowSingleReportPage\" onClick={menuToggleHandler}>\n                מעקב אחרי דיווח\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/\" onClick={menuToggleHandler}>\n                מסך הבית\n              </NavLink>\n            </li>\n\n            {auth.currentUser && (\n            \n            <li>\n              <NavLink to=\"/ReportsTable\" onClick={menuToggleHandler}>\n                ניהול דיווחים\n              </NavLink>\n            </li>\n            )}\n\n\n            {isAdmin && auth.currentUser && (\n  <>\n    <li>\n      <NavLink to=\"/AddAdministrator\"  onClick={menuToggleHandler}>הוספת משתמש</NavLink>\n    </li>\n    <li>\n      <NavLink to=\"/RemoveAdministrator\"  onClick={menuToggleHandler}>הסרת משתמש</NavLink>\n    </li>\n  </>\n)}\n\n            <li>\n              {auth.currentUser ? (\n                <LogoutButton onClick={menuToggleHandler} />\n              ) : (\n                <LoginButton onClick={handleLogout} />\n              )}\n            </li>\n          </ul>\n        </nav>\n        <div className={classes.header__content__toggle}>\n          {!menuOpen ? (\n            <BiMenuAltRight onClick={menuToggleHandler} />\n          ) : (\n            <AiOutlineClose onClick={menuToggleHandler} />\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Contact_Form_Component\\ReportForm.js",["144","145","146","147","148","149","150","151","152"],[],"import { uid } from \"uid\";\nimport styles from \"./ReportFormStyle.module..css\";\nimport { db } from \"../../firebase_setup/firebase\";\nimport { addDoc, collection, getDocs, query, where} from \"firebase/firestore\";\nimport React, { useState ,useEffect,useRef} from 'react';\nimport cities from './cities.json';\n// import * as React from 'react';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport { Paper ,MenuItem,Select,InputLabel} from \"@mui/material\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport randomatic from 'randomatic';\nimport Moment from 'react-moment';\nimport emailjs from \"@emailjs/browser\";\nimport axios from 'axios';\n\n\n\nexport default function ReportForm() {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [place, setPlace] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [city, setCity] = useState('');\n  const [Class, setClass] = useState(\"\");\n  const [isEmailValid, setIsEmailValid] = useState(true);\n  const [isAno, setIsAno] = useState(null);\n  const [secretCode, setSecretCode] = useState(randomatic('Aa0', 8));\n  const [schoolName, setSchoolName] = useState(\"\");\n  const [youthName, setYouthName] = useState(\"\");\n  const [otherPlace, setOtherPlace] = useState(\"\");\n  const [isFormVisible, setFormVisible] = useState(true);\n  const treatment = \"\";\n  const form = useRef();\n\n  const writeReportToDB = async (e) => {\n    e.preventDefault();\n    const uuid = secretCode;\n    const date1 = new Date();\n    const options = { day: 'numeric', month: 'numeric', year: 'numeric' };\n    const reportDate = date1.toLocaleDateString('en-GB', options);\n    \n    try {\n      // Query Firestore to check if there is a document with the same UUID\n      const querySnapshot = await getDocs(\n        query(collection(db, \"Reports\"), where(\"uuid\", \"==\", uuid))\n      );\n  \n      // If a document with the same UUID is found, display an error message\n      if (!querySnapshot.empty) {\n        setSecretCode(randomatic('Aa0', 8));\n        uuid=secretCode;\n      }\n  \n      const docData = {\n        name,\n        email,\n        message,\n        city,\n        place,\n        reportDate,\n        date,\n        urgency: \"דחוף\",\n        status: \"בטיפול\",\n        uuid,\n        treatment,\n        schoolName,\n        Class,\n        youthName,\n        otherPlace,\n      };\n      \n      const docRef = await addDoc(collection(db, \"Reports\"), docData);\n\n  \n      // alert(\"Report added successfully!\");\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  };\n\n\n\n  const handleRecipientChange = (e) => {\n    setEmail(e.target.value);\n    const emailRegex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i;\n    setIsEmailValid(emailRegex.test(e.target.value));\n  };\n\n\n  const handleSendReport = async (e) => {\n    e.preventDefault(); \n    await writeReportToDB(e);\n    if(secretCode !== \"\")\n    toast(\n      <div dir=\"rtl\">\n        <p>כל הכבוד על הדיווח! זהו הקוד הסודי שלך: {secretCode}</p>\n        <p>נשמח להציע מספר פעולות שאפשר לעשות כבר עכשיו</p>\n        <ul>\n          <li>פנייה פרטית למוחרם – להגיד לו בסודיות שאתה לא חלק מהחרם הזה ושלא כולם נגדו</li>\n          <li>הזמנה לפעילות: הזמן את הילד לפעילות או משחק כלשהו. אפשר גם אחרי שעות הבית ספר בבית שלו או במגרש השכונתי</li>\n          <li>שתף חברים קרובים: תשתף את החברים שאתה מאמין שיכולים לעזור ולהועיל ויחד תגשו לילד המוחרם</li>\n          <li>שתף מורה או הורה</li>\n        </ul>\n      </div>,\n      {\n        autoClose: false, // Disable automatic closing of this specific toast\n        closeButton: true, // Show the close button on this toast\n      }\n    );\n    setSecretCode(randomatic('Aa0', 8));\n  };\n\n  const sendEmail = async (e) => {\n    e.preventDefault();\n\n    emailjs\n      .sendForm(\n        \"service_vrmu408\",\n        \"template_tyq21ol\",\n        form.current,\n        \"QGS3yboIL2bq4kMnz\"\n      )\n      .then(\n        (result) => {\n          console.log(result.text);\n        },\n        (error) => {\n          console.log(error.text);\n        }\n      );\n\n      if(email !== \"\" && isEmailValid){\n        \n        const message = \"תודה על פנייתך! הקוד הסודי שלך למעקב אחרי הפנייה הוא: \"+secretCode;\n        console.log(message);\n        let recipients = [email];\n          \n    try {\n      await axios.post('http://localhost:3001/ReportsTable', {\n        recipients,\n        subject: \"קוד סודי\",\n        content: message\n      });\n\n      // Show success alert\n    alert('ההודעה נשלחה בהצלחה');\n    // Clear form fields\n\n    } catch (error) {\n      // Show error alert\n      alert('ההודעה לא נשלחה');\n      console.error('Error sending email:', error);\n    }\n      }\n  };\n\n  \n  \n  return (\n      <div>\n      <Paper elevation={3} style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }} dir=\"rtl\">\n      \n      <React.Fragment>\n      <Typography variant=\"h3\" gutterBottom>\n        אני רוצה לדווח על חרם!\n      </Typography>\n      <button className=\"anonymus\" onClick={()=> setIsAno(true)}>\n        anonymous\n      </button>\n      <button className=\"notAno\" onClick={()=> setIsAno(false)}>\n        not anonymous\n      </button>\n      </React.Fragment>\n      </Paper>\n\n{/* is anonymous */}\n      {isFormVisible && isAno === true && isAno !== null && (\n        <div className=\"full-page-form\">\n        <Paper elevation={3} style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }} dir=\"rtl\">\n        <form\n              ref={form}\n              onSubmit={(event) => {\n                sendEmail(event);\n                handleSendReport(event);\n                setTimeout(() => {\n                  setFormVisible(false); // Close the form after 2 seconds\n                }, 2000);\n              }}\n            >            <Grid container spacing={3} sx={{\n              width: '400px' ,\n              \"& label\": {\n                left: \"unset\",\n                right: \"2.75rem\",\n                transformOrigin: \"right\",\n                fontSize: \"0.8rem\",\n              },\n              \"& legend\": {\n                textAlign: \"left\",\n                fontSize: \"0.6rem\",\n              },\n        }}>\n          <Grid item xs={12}>\n            <TextField\n            select\n            required\n            label=\"באיזה עיר החרם התרחש?\"\n            fullWidth\n            variant=\"standard\"\n            value={city}\n            onChange={(e) => setCity(e.target.value)}\n            >\n        <MenuItem dir=\"rtl\" value=\"\"><em>בחר עיר</em></MenuItem>\n          {cities.filter((city) => city !== \"\").map((city) => (\n            <MenuItem dir=\"rtl\" key={city.name} value={city.name}>\n              {city.name}\n              </MenuItem>\n          ))} \n      </TextField>\n    </Grid>\n\n    <Grid item xs={12}>\n            <TextField\n              select\n              dir=\"rtl\"\n              required\n              label=\"יודעים באיזה מסגרת?\"\n              placeholder=\"בחר מסגרת\"\n              fullWidth\n              variant=\"standard\"\n              value={place}\n              onChange={(e) => setPlace(e.target.value)}\n            >\n              <MenuItem dir=\"rtl\" value=\"בית ספר\">בית ספר</MenuItem>\n              <MenuItem dir=\"rtl\" value=\"תנועת נוער\">תנועת נוער</MenuItem>\n              <MenuItem dir=\"rtl\" value=\"אחר\">אחר</MenuItem>\n            </TextField>\n          </Grid>\n\n          {/* school */}\n          {place === \"בית ספר\" &&(\n            <Grid container spacing={3} sx={{\n              width: '400px' ,\n              \"& label\": {\n                left: \"unset\",\n                right: \"2.75rem\",\n                transformOrigin: \"right\",\n                fontSize: \"0.8rem\",\n              },\n              \"& legend\": {\n                textAlign: \"left\",\n                fontSize: \"0.6rem\",\n              },\n        }}>\n            <Grid item xs={12}>\n            <TextField\n              dir=\"rtl\"\n              required\n              label=\"שם בית הספר\"\n              fullWidth\n              variant=\"standard\"\n              value={schoolName}\n              onChange={(e) => setSchoolName(e.target.value)}\n            >\n            </TextField>\n          </Grid>\n\n          <Grid item xs={12} >\n        <TextField\n            select\n            required\n            label=\"כיתה\"\n            placeholder=\"כיתה\"\n            value={Class}\n            fullWidth\n            variant=\"standard\" \n            onChange={(e) => setClass(e.target.value)}\n            >\n                <MenuItem dir=\"rtl\" value= \"כיתה א\">כיתה א</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ב\">כיתה ב</MenuItem>\n                <MenuItem dir=\"rtl\" value= \"כיתה ג\">כיתה ג</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ד\">כיתה ד</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ה\">כיתה ה</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ו\">כיתה ו</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ז\">כיתה ז</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ח\">כיתה ח</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ט\">כיתה ט</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה י\">כיתה י</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה יא\">כיתה יא</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה יב\">כיתה יב</MenuItem>\n          </TextField>\n         </Grid> \n        </Grid> \n          )}\n          {/* youth */}\n          {place === \"תנועת נוער\"  &&(\n            <Grid item xs={12}>\n            <TextField\n              dir=\"rtl\"\n              required\n              label=\"שם תנועת הנוער\"\n              fullWidth\n              variant=\"standard\"\n              value={youthName}\n              onChange={(e) => setYouthName(e.target.value)}\n            >\n            </TextField>\n          </Grid>\n          )}\n          {/* other */}\n          {place === \"אחר\"  &&(\n            <Grid item xs={12}>\n            <TextField\n              dir=\"rtl\"\n              required\n              label=\"אחר\"\n              fullWidth\n              variant=\"standard\"\n              value={otherPlace}\n              onChange={(e) => setOtherPlace(e.target.value)}\n            >\n            </TextField>\n          </Grid>\n          )}\n\n          <Grid item xs={12}  >\n          <TextField\n            label=\"באיזה תאריך החרם קרה?\"\n            type=\"date\"\n            value={date}\n            fullWidth\n            variant=\"standard\"\n            onChange={(e) => setDate(e.target.value)}\n            inputProps={{\n              style: { paddingRight: '230px'  },\n            }}\n          />\n          </Grid>\n\n          <Grid item xs={12}  >\n          <TextField\n            required\n            label=\"תיאור קצר של המקרה:\"\n            placeholder=\"כתוב את התוכן כאן\"\n            value={message}\n            dir=\"rtl\"\n            onChange={(e) => setMessage(e.target.value)}\n            fullWidth\n            multiline\n            variant=\"standard\"\n          />\n          </Grid>\n          <Grid item >\n          <button type=\"submit\" variant=\"contained\">\n            שלח דיווח\n          </button>\n        </Grid>\n              </Grid>\n            </form>\n           </Paper>\n           </div>\n    )\n    }\n\n    {/* is not anonymous */}\n    {isFormVisible && !isAno && isAno !== null && (\n      <div className=\"full-page-form\">\n        <Paper elevation={3} style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }} dir=\"rtl\">\n        <form\n              ref={form}\n              onSubmit={(event) => {\n                sendEmail(event);\n                handleSendReport(event);\n                setTimeout(() => {\n                  setFormVisible(false); // Close the form after 2 seconds\n                }, 2000);\n              }}\n            >            <Grid container spacing={3} sx={{\n              width: '400px' ,\n              \"& label\": {\n                left: \"unset\",\n                right: \"2.75rem\",\n                transformOrigin: \"right\",\n                fontSize: \"0.8rem\",\n              },\n              \"& legend\": {\n                textAlign: \"left\",\n                fontSize: \"0.6rem\",\n              },\n        }}>\n\n      <Grid item xs={12} sm={6} >\n          <TextField\n            label=\"שם\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            fullWidth\n            variant=\"standard\"\n          />\n        </Grid>\n\n        <Grid item xs={12}  >\n          <TextField\n            label=\"כתובת אימייל\"\n            placeholder=\"כתוב את התוכן כאן\"\n            value={email}\n            dir=\"ltr\"\n            fullWidth\n            multiline\n            variant=\"standard\"\n            onChange={handleRecipientChange}\n            error={!isEmailValid && email !== \"\"}\n            helperText={!isEmailValid ? 'כתובת מייל לא תקינה' : ''}\n          />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n            select\n            required\n            label=\"באיזה עיר החרם התרחש?\"\n            fullWidth\n            variant=\"standard\"\n            value={city}\n            onChange={(e) => setCity(e.target.value)}\n            >\n        <MenuItem dir=\"rtl\" value=\"\"><em>בחר עיר</em></MenuItem>\n          {cities.filter((city) => city !== \"\").map((city) => (\n            <MenuItem dir=\"rtl\" key={city.name} value={city.name}>\n              {city.name}\n              </MenuItem>\n          ))} \n      </TextField>\n    </Grid>\n\n    \n    <Grid item xs={12}>\n            <TextField\n              select\n              dir=\"rtl\"\n              required\n              label=\"יודעים באיזה מסגרת?\"\n              placeholder=\"בחר מסגרת\"\n              fullWidth\n              variant=\"standard\"\n              value={place}\n              onChange={(e) => setPlace(e.target.value)}\n            >\n              <MenuItem dir=\"rtl\" value=\"בית ספר\">בית ספר</MenuItem>\n              <MenuItem dir=\"rtl\" value=\"תנועת נוער\">תנועת נוער</MenuItem>\n              <MenuItem dir=\"rtl\" value=\"אחר\">אחר</MenuItem>\n            </TextField>\n          </Grid>\n\n          {/* school */}\n          {place === \"בית ספר\" &&(\n            <Grid container spacing={3} sx={{\n              width: '400px' ,\n              \"& label\": {\n                left: \"unset\",\n                right: \"2.75rem\",\n                transformOrigin: \"right\",\n                fontSize: \"0.8rem\",\n              },\n              \"& legend\": {\n                textAlign: \"left\",\n                fontSize: \"0.6rem\",\n              },\n        }}>\n            <Grid item xs={12}>\n            <TextField\n              dir=\"rtl\"\n              required\n              label=\"שם בית הספר\"\n              fullWidth\n              variant=\"standard\"\n              value={schoolName}\n              onChange={(e) => setSchoolName(e.target.value)}\n            >\n            </TextField>\n          </Grid>\n\n          <Grid item xs={12} >\n        <TextField\n            select\n            required\n            label=\"כיתה\"\n            placeholder=\"כיתה\"\n            value={Class}\n            fullWidth\n            variant=\"standard\" \n            onChange={(e) => setClass(e.target.value)}\n            >\n                <MenuItem dir=\"rtl\" value= \"כיתה א\">כיתה א</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ב\">כיתה ב</MenuItem>\n                <MenuItem dir=\"rtl\" value= \"כיתה ג\">כיתה ג</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ד\">כיתה ד</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ה\">כיתה ה</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ו\">כיתה ו</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ז\">כיתה ז</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ח\">כיתה ח</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה ט\">כיתה ט</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה י\">כיתה י</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה יא\">כיתה יא</MenuItem>\n                <MenuItem dir=\"rtl\" value=\"כיתה יב\">כיתה יב</MenuItem>\n          </TextField>\n         </Grid> \n        </Grid> \n          )}\n          {/* youth */}\n          {place === \"תנועת נוער\"  &&(\n            <Grid item xs={12}>\n            <TextField\n              dir=\"rtl\"\n              required\n              label=\"שם תנועת הנוער\"\n              fullWidth\n              variant=\"standard\"\n              value={youthName}\n              onChange={(e) => setYouthName(e.target.value)}\n            >\n            </TextField>\n          </Grid>\n          )}\n          {/* other */}\n          {place === \"אחר\"  &&(\n            <Grid item xs={12}>\n            <TextField\n              dir=\"rtl\"\n              required\n              label=\"אחר\"\n              fullWidth\n              variant=\"standard\"\n              value={otherPlace}\n              onChange={(e) => setOtherPlace(e.target.value)}\n            >\n            </TextField>\n          </Grid>\n          )}\n\n          <Grid item xs={12}  >\n          <TextField\n            label=\"באיזה תאריך החרם קרה?\"\n            type=\"date\"\n            value={date}\n            fullWidth\n            variant=\"standard\"\n            onChange={(e) => setDate(e.target.value)}\n            inputProps={{\n              style: { paddingRight: '230px'  },\n            }}\n          />\n          </Grid>\n\n          <Grid item xs={12}  >\n          <TextField\n            required\n            label=\"תיאור קצר של המקרה:\"\n            placeholder=\"כתוב את התוכן כאן\"\n            value={message}\n            dir=\"rtl\"\n            onChange={(e) => setMessage(e.target.value)}\n            fullWidth\n            multiline\n            variant=\"standard\"\n          />\n          </Grid>\n\n          <Grid item>\n          <button type=\"submit\" variant=\"contained\">\n            שלח דיווח\n          </button>\n        </Grid>\n\n              </Grid>\n            </form>\n           </Paper>\n           </div>\n    )\n    }\n\n<ToastContainer\n  className=\"custom-toast-container\" // Apply the custom CSS class\n  autoClose={false}\n  closeButton={true}\n  hideProgressBar={true}\n/>\n\n    <div>\n    אנשי קשר רלוונטיים:\n-\tכנפי דרור:\n-\tמוקד 105:\n\n    </div>\n     </div>\n  );\n}","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Footer_Component\\Footer.js",["153"],[],"import React from \"react\";\nimport footer from \"../../photos/footer.jpg\"; // import the logo image\n\nfunction Footer() {\n  return (\n    <div>\n      <div>כאן יהיה footer</div>\n      {/* <img src={footer} alt=\"footer logo\" /> */}\n    </div>\n  );\n}\n\nexport default Footer;\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Edit_Information_Component\\EditInformationComponent.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Reports_Table_Component\\ReportsTableCom.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Logout_Button_Component\\Logout_button.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Login_Button_Component\\LoginButton.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Email_Cpomponent\\EmailForm.js",["154","155","156"],[],"import axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { db } from \"../../firebase_setup/firebase\";\nimport { addDoc,deleteDoc, collection, query, where, getDocs } from \"firebase/firestore\";\nimport { Grid ,TextField,MenuItem} from '@mui/material';\n\n\nexport const EmailForm = ({ c }) => {\n  const [recipients, setRecipients] = useState([]);\n  const [subject, setSubject] = useState('');\n  const [content, setContent] = useState('');\n  const [city, setCity] = useState(c);\n  const [email, setEmail] = useState('');\n  const [existingEmails, setExistingEmails] = useState([]);\n  const [isEmailValid, setIsEmailValid] = useState(true);\n  const [isNewEmailValid, setIsNewEmailValid] = useState(true);\n  const [newEmail, setNewEmail] = useState('');\n  const [isDeleteEmailValid, setIsDeleteEmailValid] = useState(true);\n  const [deleteEmail, setdeleteEmail] = useState('');\n  const [showForm, setShowForm] = useState(true);\n\n  useEffect(() => {\n    const fetchEmails = async () => {\n      try {\n        const q = query(collection(db, \"emailDB\"), where(\"city\", \"==\", city));\n        const querySnapshot = await getDocs(q);\n        const emails = querySnapshot.docs.map((doc) => doc.data().email);\n        setExistingEmails(emails);\n      } catch (error) {\n        console.error(\"Error fetching emails: \", error);\n      }\n    };\n\n    if (city) {\n      fetchEmails();\n    }\n  }, [city]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(\"hrlo!\");\n    if(!isEmailValid || city === \"\"){\n      console.log(\"hrlo!ssss\");\n      console.log(\"im email\"+email);\n      console.log(\"hrlcity\" + city);\n      console.log(\"hrlo!ssss\" + !isEmailValid);\n      return;}\n      \n    try {\n      await axios.post('http://localhost:3001/ReportsTable', {\n        recipients,\n        subject,\n        content,\n      });\n\n      // Show success alert\n    alert('ההודעה נשלחה בהצלחה');\n    // Clear form fields\n    setRecipients([]);\n    setSubject('');\n    setContent('');\n\n    // Close the form\n    setShowForm(false);\n\n    } catch (error) {\n      // Show error alert\n      alert('ההודעה לא נשלחה');\n      console.error('Error sending email:', error);\n    }\n  }\n\n  const handleRecipientChange = (e) => {\n    let selectedValues = [];\n    if (e.target.value !== \"\") {\n      selectedValues = Array.isArray(e.target.value) ? e.target.value : [e.target.value];\n    }\n  \n    setRecipients(selectedValues);\n  \n    let isValid = true;\n    if (selectedValues.length > 0) {\n      selectedValues.forEach((email) => {\n        const emailRegex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i;\n        if (!emailRegex.test(email)) {\n          isValid = false;\n        }\n      });\n    }\n  \n    setIsEmailValid(isValid);\n    // setEmail(e.target.value);\n    // const emailRegex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i;\n    // setIsEmailValid(emailRegex.test(e.target.value));\n  };\n\n  // const writeEmailsToDB = async (e) => {\n  //   e.preventDefault();\n  //   if(city === \"\" || email === \"\")\n  //     return;\n  //   try {\n  //     const docRef = await addDoc(collection(db, \"emailDB\"), {\n  //       city,\n  //       email,\n  //     });\n  //   } catch (e) {\n  //     console.error(\"Error adding document: \", e);\n  //   }\n  //   setEmail('');\n  //   setCity('');\n  // };\n\n  const writeNewEmailsToDB = async (e) => {\n    if (!isNewEmailValid || newEmail === '') {\n      return;\n    }\n  \n    try {\n      // Check if the email with the same email and city already exists\n      const querySnapshot = await getDocs(\n        query(\n          collection(db, 'emailDB'),\n          where('email', '==', newEmail),\n          where('city', '==', city)\n        )\n      );\n  \n      if (querySnapshot.empty) {\n        // No matching document found, proceed with adding the new email\n        const docRef = await addDoc(collection(db, 'emailDB'), {\n          city,\n          email: newEmail,\n        });\n        alert('המייל נוסף בהצלחה');\n        setNewEmail('');\n      } else {\n        // Email with the same email and city already exists\n        alert('כתובת המייל כבר קיימת עבור העיר הנבחרת');\n      }\n    } catch (e) {\n      console.error('Error adding document: ', e);\n    }\n  };\n\n\n  const handleNewEmailChange = (event) => {\n    setNewEmail(event.target.value);\n    // Validate email format using a regular expression\n    const emailRegex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i;\n    setIsNewEmailValid(emailRegex.test(newEmail));\n  };\n\n\n  const deleteEmailsDB = async (e) => {\n    if (!isDeleteEmailValid || deleteEmail === \"\") {\n      return;\n    }\n  \n    try {\n      const querySnapshot = await getDocs(\n        query(\n          collection(db, 'emailDB'),\n          where('email', '==', deleteEmail),\n          where('city', '==', city)\n        )\n      );\n  \n      if (!querySnapshot.empty) {\n        // Delete the matching document\n        querySnapshot.forEach(async (doc) => {\n          await deleteDoc(doc.ref);\n        });\n        alert('המייל נמחק בהצלחה');\n        setdeleteEmail('');\n      } else {\n        // No matching document found\n        alert('לא נמצא מייל תואם למחיקה');\n      }\n    } catch (e) {\n      console.error('Error deleting document: ', e);\n    }\n  };\n\n  const handleDeleteEmailChange = (event) => {\n    setdeleteEmail(event.target.value);\n    // Validate email format using a regular expression\n    const emailRegex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i;\n    setIsDeleteEmailValid(emailRegex.test(deleteEmail));\n  };\n\n  \n\n  \n\n\n  return (\n    <div>\n      {showForm && (\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n        <form onSubmit={handleSubmit} style={{ textAlign: 'center' }}>\n        <Grid container direction=\"column\" spacing={2} >\n          {/* The city exists in the database */}\n          {existingEmails.length > 0 && (\n            <Grid item sx={{ width: '400px' }}>\n             <TextField\n              select\n              label=\"בחר כתובת אימייל מהמאגר\"\n              variant=\"filled\"\n              sx={{\n                width: '400px',\n                \"& label\": {\n                  left: \"unset\",\n                  right: \"2.75rem\",\n                  transformOrigin: \"right\",\n                  fontSize: \"0.8rem\",\n                },\n                \"& legend\": {\n                  textAlign: \"left\",\n                  fontSize: \"0.6rem\",\n                },\n              }}\n              value={recipients}\n              onChange={handleRecipientChange}\n              fullWidth\n              SelectProps={{\n                multiple: true,\n              }}\n            >\n              <MenuItem disabled value=\"\">\n                {/* <em>בחר כתובת אימייל מהמאגר</em> */}\n              </MenuItem>\n              {existingEmails\n                .filter((email) => email !== '')\n                .map((existingEmail) => (\n                  <MenuItem key={existingEmail} value={existingEmail}>\n                    {existingEmail}\n                  </MenuItem>\n                ))}\n            </TextField>\n          </Grid>\n          )}\n\n          <Grid item >\n            <TextField\n              required\n              label=\"הזן כתובת אי מייל\"\n              variant=\"filled\"\n              placeholder=\"הזן כתובת\"\n              inputProps={{ dir: 'rtl' }}\n              sx={{\n                width: '400px' ,\n                \"& label\": {\n                  left: \"unset\",\n                  right: \"1.75rem\",\n                  transformOrigin: \"right\",\n                  fontSize: \"0.8rem\",\n                },\n                \"& legend\": {\n                  textAlign: \"right\",\n                  fontSize: \"0.6rem\",\n                },\n              }}\n              value={recipients}\n              onChange={handleRecipientChange}\n              error={!isEmailValid}\n              helperText={!isEmailValid ? 'כתובת מייל לא תקינה' : ''}\n            />\n          </Grid>\n\n          <Grid item>\n        <TextField\n          required\n          label=\"נושא ההודעה\"\n          variant=\"filled\"\n          placeholder=\"נושא\"\n          value={subject}\n          onChange={(e) => setSubject(e.target.value)}\n          inputProps={{ dir: 'rtl' }}\n          sx={{\n            width: '400px' ,\n            \"& label\": {\n              left: \"unset\",\n              right: \"1.75rem\",\n              transformOrigin: \"right\",\n              fontSize: \"0.8rem\",\n            },\n            \"& legend\": {\n              textAlign: \"right\",\n              fontSize: \"0.6rem\",\n            },\n          }}\n        />\n      </Grid>\n      <Grid item>\n          <TextField\n              required\n              type=\"text\"\n              label = \"תוכן ההודעה\"\n              variant=\"filled\"\n              color=\"success\"\n              fullWidth\n              multiline\n              placeholder=\"תוכן הודעה\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              inputProps={{ dir: 'rtl' }}\n              sx={{\n                width: '400px' ,\n                \"& label\": {\n                  left: \"unset\",\n                  right: \"1.75rem\",\n                  transformOrigin: \"right\",\n                  fontSize: \"0.8rem\",\n                },\n                \"& legend\": {\n                  textAlign: \"right\",\n                  fontSize: \"0.6rem\",\n                },\n              }}\n          />\n          </Grid>\n\n          <Grid item>\n            <button type=\"submit\">שלח מייל</button>\n          </Grid>\n        </Grid>\n      </form>\n   </div>\n   )}\n\n    {showForm && ( \n      <div>\n      <TextField\n        label=\"הוסף כתובת מייל למאגר\"\n        variant=\"filled\"\n        value={newEmail}\n        onChange={handleNewEmailChange}\n        error={!isNewEmailValid}\n        helperText={!isNewEmailValid ? 'כתובת מייל לא תקינה' : ''}\n        sx={{\n          \"& label\": {\n            left: \"unset\",\n            right: \"1.75rem\",\n            transformOrigin: \"right\",\n            fontSize: \"0.8rem\",\n          },\n          \"& legend\": {\n            textAlign: \"right\",\n            fontSize: \"0.6rem\",\n          },\n        }}\n      />\n      <button onClick={writeNewEmailsToDB} variant=\"contained\" color=\"primary\">\n       הוסף מייל\n      </button>\n    </div>\n    )}\n\n{showForm && ( \n    <div>\n      <TextField\n        label= \"הסר כתובת מייל מהמאגר\"\n        variant=\"filled\"\n        value={deleteEmail}\n        onChange={handleDeleteEmailChange}\n        error={!isDeleteEmailValid}\n        helperText={!isDeleteEmailValid ? 'כתובת מייל לא תקינה' : ''}\n        sx={{\n          \"& label\": {\n            left: \"unset\",\n            right: \"1.75rem\",\n            transformOrigin: \"right\",\n            fontSize: \"0.8rem\",\n          },\n          \"& legend\": {\n            textAlign: \"right\",\n            fontSize: \"0.6rem\",\n          },\n        }}\n      />\n      <button onClick={deleteEmailsDB} variant=\"contained\" color=\"primary\">\n       הסר מייל\n      </button>\n    </div>\n)}\n    \n\n\n    </div>\n  );\n};\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\ProtectedRoute.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\context\\AuthContext.js",["157","158","159","160","161","162","163"],[],"import { createContext, useContext, useEffect, useState } from 'react';\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n  getAuth,\n} from 'firebase/auth';\nimport { auth, db } from '../firebase_setup/firebase';\nimport { doc, getDoc, collection } from 'firebase/firestore';\n\nexport const UserContext = createContext();\n\nexport const AuthContextProvider = ({ children }) => {\n  const [user, setUser] = useState({});\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isRegularUser, setIsRegularUser] = useState(false);\n\n\n\n\n  const createUser = (email, password) => {\n    return createUserWithEmailAndPassword(auth, email, password);\n  };\n\n  const signIn = (email, password) => {\n    return signInWithEmailAndPassword(auth, email, password);\n  };\n\n  const logout = () => {\n    return signOut(auth);\n  };\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      console.log(currentUser);\n      setUser(currentUser);\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  return (\n    <UserContext.Provider\n      value={{ createUser, isAdmin, isRegularUser, user, logout, signIn }}\n    >\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport const UserAuth = () => {\n  return useContext(UserContext);\n};\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\Signup_Component\\Signup.jsx",["164","165"],[],"import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { UserAuth } from \"../../context/AuthContext\";\n\nconst Signup = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const { createUser } = UserAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    try {\n      // Call createUser function with additional role parameter\n      const user = await createUser(email, password, { role: \"admin\" });\n    } catch (e) {\n      setError(e.message);\n      console.log(e.message);\n      navigate(\"/\");\n    }\n  };\n\n  return (\n    <div>\n      <div>\n        <h1>Sign up for a free account</h1>\n        <p>\n          Already have an account yet? <Link to=\"/\">Sign in.</Link>\n        </p>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>Email Address</label>\n          <input onChange={(e) => setEmail(e.target.value)} type=\"email\" />\n        </div>\n        <div>\n          <label>Password</label>\n          <input\n            onChange={(e) => setPassword(e.target.value)}\n            type=\"password\"\n          />\n        </div>\n        <button>Sign Up</button>\n      </form>\n    </div>\n  );\n};\n\nexport default Signup;\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\RemoveUser_Component\\RemoveAdministraitor.jsx",["166"],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\components\\ProtectedAdminRoute.js",["167","168","169"],[],"import { Navigate } from 'react-router-dom';\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../firebase_setup/firebase\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { collection, doc, getDoc } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\nconst ProtectedAdminRoute = ({ children }) => {\n  const [userAccess, setUserAccess] = useState(null);\n\n  useEffect(() => {\n    const fetchUserAccess = async () => {\n      try {\n        const auth = getAuth();\n        const user = auth.currentUser;\n        \n        if (user) {\n          const email = user.email;\n          const adminUserDocRef = doc(db, \"AdminUsers\", email);\n          const adminUserDocSnapshot = await getDoc(adminUserDocRef);\n          \n          if (adminUserDocSnapshot.exists()) {\n            setUserAccess(\"Admin\");\n          } else {\n            setUserAccess(\"Regular\");\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching user access: \", error);\n      }\n    };\n\n    fetchUserAccess();\n  }, []);\n\n\n  if (!userAccess) {\n    // Redirect to the home page if user access is not determined yet\n    return null;\n  }\n\n  if (userAccess !== \"Admin\") {\n    // Redirect to the home page if user is not an admin\n    return <Navigate to='/' />;\n  }\n\n  // Allow access to all routes if the user is an admin\n  return children;\n};\n\nexport default ProtectedAdminRoute;\n","C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\RemoveAdministratorPage\\RemoveAdministrator.js",[],[],"C:\\Users\\shaha\\OneDrive\\שולחן העבודה\\Project\\KanfeiDror\\src\\pages\\AddAdministratorPage\\AddAdministrator.js",[],[],{"ruleId":"170","severity":1,"message":"171","line":1,"column":27,"nodeType":"172","messageId":"173","endLine":1,"endColumn":33},{"ruleId":"170","severity":1,"message":"174","line":2,"column":8,"nodeType":"172","messageId":"173","endLine":2,"endColumn":14},{"ruleId":"170","severity":1,"message":"174","line":3,"column":8,"nodeType":"172","messageId":"173","endLine":3,"endColumn":14},{"ruleId":"170","severity":1,"message":"174","line":2,"column":8,"nodeType":"172","messageId":"173","endLine":2,"endColumn":14},{"ruleId":"170","severity":1,"message":"175","line":1,"column":27,"nodeType":"172","messageId":"173","endLine":1,"endColumn":36},{"ruleId":"170","severity":1,"message":"176","line":3,"column":19,"nodeType":"172","messageId":"173","endLine":3,"endColumn":22},{"ruleId":"170","severity":1,"message":"177","line":15,"column":10,"nodeType":"172","messageId":"173","endLine":15,"endColumn":23},{"ruleId":"178","severity":1,"message":"179","line":53,"column":6,"nodeType":"180","endLine":53,"endColumn":8,"suggestions":"181"},{"ruleId":"178","severity":1,"message":"179","line":63,"column":6,"nodeType":"180","endLine":63,"endColumn":8,"suggestions":"182"},{"ruleId":"170","severity":1,"message":"183","line":100,"column":15,"nodeType":"172","messageId":"173","endLine":100,"endColumn":18},{"ruleId":"170","severity":1,"message":"184","line":1,"column":10,"nodeType":"172","messageId":"173","endLine":1,"endColumn":13},{"ruleId":"170","severity":1,"message":"185","line":2,"column":8,"nodeType":"172","messageId":"173","endLine":2,"endColumn":14},{"ruleId":"170","severity":1,"message":"175","line":5,"column":27,"nodeType":"172","messageId":"173","endLine":5,"endColumn":36},{"ruleId":"170","severity":1,"message":"186","line":11,"column":8,"nodeType":"172","messageId":"173","endLine":11,"endColumn":24},{"ruleId":"170","severity":1,"message":"187","line":12,"column":26,"nodeType":"172","messageId":"173","endLine":12,"endColumn":32},{"ruleId":"170","severity":1,"message":"188","line":12,"column":33,"nodeType":"172","messageId":"173","endLine":12,"endColumn":43},{"ruleId":"170","severity":1,"message":"189","line":16,"column":8,"nodeType":"172","messageId":"173","endLine":16,"endColumn":14},{"ruleId":"190","severity":1,"message":"191","line":56,"column":9,"nodeType":"172","messageId":"192","endLine":56,"endColumn":13},{"ruleId":"170","severity":1,"message":"193","line":77,"column":13,"nodeType":"172","messageId":"173","endLine":77,"endColumn":19},{"ruleId":"170","severity":1,"message":"194","line":2,"column":8,"nodeType":"172","messageId":"173","endLine":2,"endColumn":14},{"ruleId":"170","severity":1,"message":"195","line":12,"column":16,"nodeType":"172","messageId":"173","endLine":12,"endColumn":23},{"ruleId":"170","severity":1,"message":"196","line":13,"column":17,"nodeType":"172","messageId":"173","endLine":13,"endColumn":25},{"ruleId":"170","severity":1,"message":"193","line":130,"column":15,"nodeType":"172","messageId":"173","endLine":130,"endColumn":21},{"ruleId":"170","severity":1,"message":"197","line":7,"column":3,"nodeType":"172","messageId":"173","endLine":7,"endColumn":10},{"ruleId":"170","severity":1,"message":"198","line":9,"column":16,"nodeType":"172","messageId":"173","endLine":9,"endColumn":18},{"ruleId":"170","severity":1,"message":"176","line":10,"column":10,"nodeType":"172","messageId":"173","endLine":10,"endColumn":13},{"ruleId":"170","severity":1,"message":"199","line":10,"column":15,"nodeType":"172","messageId":"173","endLine":10,"endColumn":21},{"ruleId":"170","severity":1,"message":"200","line":10,"column":23,"nodeType":"172","messageId":"173","endLine":10,"endColumn":33},{"ruleId":"170","severity":1,"message":"201","line":16,"column":19,"nodeType":"172","messageId":"173","endLine":16,"endColumn":29},{"ruleId":"170","severity":1,"message":"202","line":17,"column":25,"nodeType":"172","messageId":"173","endLine":17,"endColumn":41},{"ruleId":"170","severity":1,"message":"203","line":8,"column":10,"nodeType":"172","messageId":"173","endLine":8,"endColumn":15},{"ruleId":"170","severity":1,"message":"204","line":17,"column":13,"nodeType":"172","messageId":"173","endLine":17,"endColumn":17},{"ruleId":"170","severity":1,"message":"200","line":2,"column":10,"nodeType":"172","messageId":"173","endLine":2,"endColumn":20},{"ruleId":"170","severity":1,"message":"205","line":3,"column":10,"nodeType":"172","messageId":"173","endLine":3,"endColumn":14},{"ruleId":"170","severity":1,"message":"206","line":4,"column":10,"nodeType":"172","messageId":"173","endLine":4,"endColumn":28},{"ruleId":"170","severity":1,"message":"200","line":5,"column":10,"nodeType":"172","messageId":"173","endLine":5,"endColumn":20},"no-unused-vars","'Router' is defined but never used.","Identifier","unusedVar","'Header' is defined but never used.","'useEffect' is defined but never used.","'doc' is defined but never used.","'isRegularUser' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'checkUserRoles'. Either include it or remove the dependency array.","ArrayExpression",["207"],["208"],"'uid' is assigned a value but never used.","'uid' is defined but never used.","'styles' is defined but never used.","'FormControlLabel' is defined but never used.","'Select' is defined but never used.","'InputLabel' is defined but never used.","'Moment' is defined but never used.","no-const-assign","'uuid' is constant.","const","'docRef' is assigned a value but never used.","'footer' is defined but never used.","'setCity' is assigned a value but never used.","'setEmail' is assigned a value but never used.","'getAuth' is defined but never used.","'db' is defined but never used.","'getDoc' is defined but never used.","'collection' is defined but never used.","'setIsAdmin' is assigned a value but never used.","'setIsRegularUser' is assigned a value but never used.","'error' is assigned a value but never used.","'user' is assigned a value but never used.","'auth' is defined but never used.","'onAuthStateChanged' is defined but never used.",{"desc":"209","fix":"210"},{"desc":"209","fix":"211"},"Update the dependencies array to be: [checkUserRoles]",{"range":"212","text":"213"},{"range":"214","text":"213"},[1867,1869],"[checkUserRoles]",[2052,2054]]